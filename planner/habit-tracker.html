<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker</title>
    <link rel="stylesheet" href="../planner.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .planner-section {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid #e0e0e0;
        }
        .planner-section-header {
            font-size: 1.8em;
            color: #0056b3;
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .habit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            text-align: center;
        }
        .habit-item {
            background: #f0f9ff;
            padding: 15px 10px;
            border-radius: 10px;
            border: 1px solid #e0e7ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            color: #004080;
        }
        .habit-item.completed {
            background: #e6ffe6;
            border-color: #a3e6a3;
        }
        .habit-icon {
            font-size: 2.5em;
            margin-bottom: 8px;
        }
        .progress-bar {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            height: 8px;
            margin-top: 8px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #28a745;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header style="background-color: #0056b3; padding: 15px 20px; color: white; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h1 style="margin: 0; font-size: 1.8em;">Habit Tracker</h1>
        <nav style="margin-top: 10px;">
            <a href="../planner.html" style="color: white; text-decoration: none; font-weight: bold;">← Back to Planner</a>
        </nav>
    </header>
    <div class="planner-section" data-section-id="habit-tracker">
        <div class="planner-section-header">❤️ Habit Tracker</div>
        <div class="content">
            <div class="habit-grid">
                <div class="habit-item completed">
                    <div class="habit-icon">📚</div>
                    <div>Read</div>
                </div>
                <div class="habit-item completed">
                    <div class="habit-icon">🧘</div>
                    <div>Meditate</div>
                </div>
                <div class="habit-item">
                    <div class="habit-icon">📖</div>
                    <div>Study</div>
                </div>
                <div class="habit-item completed">
                    <div class="habit-icon">🧹</div>
                    <div>Clean</div>
                </div>
                <div class="habit-item">
                    <div class="habit-icon">🤸</div>
                    <div>Stretch</div>
                </div>
                <div class="habit-item completed">
                    <div class="habit-icon">💧</div>
                    <div>Hydrate</div>
                </div>
                <div class="habit-item">
                    <div class="habit-icon">🌱</div>
                    <div>Journal</div>
                </div>
                <div class="habit-item completed">
                    <div class="habit-icon">🚶</div>
                    <div>Walk</div>
                </div>
            </div>
            
            <div style="margin-top: 1rem; text-align: center; padding: 1rem; background: #f8faff; border-radius: 8px;">
                <div style="font-weight: bold; color: #004080;">Today's Progress</div>
                <div style="font-size: 1.5rem; margin: 0.5rem 0;">5/8 habits completed</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 62.5%;"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="planner-section" data-section-id="add-habit">
        <div class="planner-section-header">➕ Add New Habit</div>
        <div class="content">
            <input type="text" id="newHabitName" placeholder="Habit Name" style="padding: 10px; margin-right: 10px; border-radius: 5px; border: 1px solid #ddd;">
            <input type="text" id="newHabitEmoji" placeholder="Emoji (e.g., 📚)" style="padding: 10px; margin-right: 10px; border-radius: 5px; border: 1px solid #ddd; width: 80px;">
            <button id="openEmojiPickerBtn" style="padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">Add Emoji</button>
            <button id="addHabitBtn" style="padding: 10px 15px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">Add Habit</button>
        </div>
    </div>
    <div id="emojiPicker" style="display: none; position: absolute; background-color: white; border: 1px solid #ddd; border-radius: 8px; padding: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000;">
        <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 5px; max-height: 200px; overflow-y: auto;">
            <!-- Emojis will be loaded here by JavaScript -->
        </div>
        <button id="closeEmojiPickerBtn" style="margin-top: 10px; padding: 8px 12px; background-color: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer; width: 100%;">Close</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const habitGrid = document.querySelector('.habit-grid');
            const addHabitBtn = document.getElementById('addHabitBtn');
            const newHabitNameInput = document.getElementById('newHabitName');
            const newHabitEmojiInput = document.getElementById('newHabitEmoji');
            const openEmojiPickerBtn = document.getElementById('openEmojiPickerBtn');
            const emojiPicker = document.getElementById('emojiPicker');
            const closeEmojiPickerBtn = document.getElementById('closeEmojiPickerBtn');
            const emojiGrid = emojiPicker.querySelector('div');

            const emojis = ['😀', '😁', '😂', '🤣', '😃', '😄', '😅', '😆', '😉', '😊', '😋', '😎', '😍', '😘', '😗', '😙', '😚', '🙂', '🤗', '🤩', '🤔', '🤨', '😐', '😑', '😶', '🙄', '😏', '😣', '😥', '😮', '🤐', '😯', '😪', '😫', '😴', '😌', '😛', '😜', '😝', '🤤', '😒', '😓', '😔', '😕', '🙃', '🤑', '😲', '☹️', '🙁', '😖', '😞', '😟', '😤', '😢', '😭', '😦', '😧', '😨', '😩', '🤯', '😬', '😰', '😱', '🥵', '🥶', '😳', '🤪', '😵', '😡', '😠', '🤬', '😈', '👿', '👹', '👺', '💀', '👻', '👽', '🤖', '💩', '😺', '😸', '😹', '😻', '😼', '😽', '🙀', '😿', '😾', '👋', '🤚', '🖐️', '✋', '🖖', '👌', '🤏', '✌️', '🤞', '🤟', '🤘', '🤙', '👈', '👉', '👆', '🖕', '👇', '☝️', '👍', '👎', '✊', '👊', '🤛', '🤜', '👏', '🙌', '👐', '🤲', '🤝', '🙏', '✍️', '💅', '🤳', '💪', '🦵', '🦶', '👂', '👃', '🧠', '🦷', '🦴', '👀', '👁️', '👅', '👄', '👶', '👧', '👦', '👩', '👨', '🧑', '👱‍♀️', '👱', '🧔', '👵', '👴', '🧓', '🙍‍♀️', '🙍‍♂️', '🙎‍♀️', '🙎‍♂️', '🙅‍♀️', '🙅‍♂️', '🙆‍♀️', '🙆‍♂️', '💁‍♀️', '💁‍♂️', '🙋‍♀️', '🙋‍♂️', '🙇‍♀️', '🙇‍♂️', '🤷‍♀️', '🤷‍♂️', '🤦‍♀️', '🤦‍♂️', '🧏‍♀️', '🧏‍♂️', '🧑‍⚕️', '🧑‍🎓', '🧑‍🏫', '🧑‍⚖️', '🧑‍🌾', '🧑‍🍳', '🧑‍🔧', '🧑‍🏭', '🧑‍💼', '🧑‍🔬', '🧑‍💻', '🧑‍🎤', '🧑‍🎨', '🧑‍✈️', '🧑‍🚀', '🧑‍🚒', '👮‍♀️', '👮‍♂️', '🕵️‍♀️', '🕵️‍♂️', '💂‍♀️', '💂‍♂️', '👷‍♀️', '👷‍♂️', '🤴', '👸', '👳‍♀️', '👳‍♂️', '👲', '🧕', '🤵‍♀️', '🤵‍♂️', '👰‍♀️', '👰‍♂️', '🤰', '🤱', '👼', '🎅', '🤶', '🦸‍♀️', '🦸‍♂️', '🦹‍♀️', '🦹‍♂️', '🧙‍♀️', '🧙‍♂️', '🧚‍♀️', '🧚‍♂️', '🧛‍♀️', '🧛‍♂️', '🧜‍♀️', '🧜‍♂️', '🧝‍♀️', '🧝‍♂️', '🧞‍♀️', '🧞‍♂️', '🧟‍♀️', '🧟‍♂️', '👯‍♀️', '👯‍♂️', '👪', '👨‍👩‍👦', '👨‍👩‍👧', '👨‍👩‍👧‍👦', '👨‍👩‍👦‍👦', '👨‍👩‍👧‍👧', '👨‍👨‍👦', '👨‍👨‍👧', '👨‍👨‍👧‍👦', '👨‍👨‍👦‍👦', '👨‍👨‍👧‍👧', '👩‍👩‍👦', '👩‍👩‍👧', '👩‍👩‍👧‍👦', '👩‍👩‍👦‍👦', '👩‍👩‍👧‍👧', '👨‍👦', '👨‍👦‍👦', '👨‍👧', '👨‍👧‍👦', '👨‍👧‍👧', '👩‍👦', '👩‍👦‍👦', '👩‍👧', '👩‍👧‍👦', '👩‍👧‍👧', '🗣️', '👤', '👥', '🫂', '👣', '🐵', '🐒', '🦍', '🦧', '🐶', '🐕', '🦮', '🐩', '🐺', '🦊', '🦝', '🐱', '🐈', '🦁', '🐯', '🐅', '🐆', '🐴', '🐎', '🦄', '🦓', '🦌', '🐮', '🐂', '🐃', '🐄', '🐷', '🐖', '🐗', '🐽', '🐏', '🐑', '🐐', '🐪', '🐫', '🦙', '🦒', '🐘', '🦣', '🦏', ' hippopotamus', '🐭', '🐁', '🐀', '🐹', '🐰', '🐇', '🐿️', '🦫', ' hedgehogs', '🦇', '🐻', ' polar bear', '🐨', '🐼', '🦥', ' otter', '🦨', '🦘', ' badger', '🐾', '🦃', '🐔', '🐓', '🐣', '🐤', '🐥', '🐦', '🐧', '🕊️', '🦅', '🦆', '🦢', '🦉', '🦩', '🦚', '🦜', '🐸', '🐊', '🐢', '🦎', '🐍', '🐲', '🐉', '🦕', '🦖', '🐳', '🐋', '🐬', '🦭', ' fish', '🐠', '🐡', '🦈', '🐙', '🐚', '🐌', '🦋', '🐛', '🐜', '🐝', '🐞', '🦗', '🕷️', '🕸️', '🦂', '🦟', '🪰', '🪱', '🦠', '💐', '🌸', '💮', '🏵️', '🌹', '🥀', '🌺', '🌻', '🌼', '🌷', '🌱', '🌲', '🌳', '🌴', '🌵', '🌾', '🌿', '☘️', '🍀', '🍁', '🍂', '🍃', '🍇', '🍈', '🍉', '🍊', '🍋', '🍌', '🍍', '🥭', '🍎', '🍏', '🍐', '🍑', '🍒', '🍓', '🫐', '🥝', '🍅', '🫒', '🥥', '🥑', '🍆', '🥔', '🥕', '🌽', '🌶️', '🫑', '🥒', '🥬', '🥦', '🧄', '🧅', '🍄', '🥜', '🌰', '🍞', '🥐', '🥖', '🫓', '🥨', '🥯', '🥞', '🧇', '🧀', '🍖', '🍗', '🥩', '🥓', '🍔', '🍟', '🍕', '🌭', '🥪', '🌮', '🌯', '🫔', '🥙', '🧆', '🥚', '🍳', '🥘', '🍲', '🫕', '🥣', '🥗', '🍿', ' butter', '🧂', '🥫', '🍱', '🍘', '🍙', '🍚', '🍛', '🍜', '🍝', '🍠', '🍢', '🍣', '🍤', '🍥', '🥮', '🫙', '🥟', '🥠', '🥡', '🦀', '🦞', '🦐', '🦑', '🦪', '🍦', '🍧', '🍨', '🍩', '🍪', '🎂', '🍰', '🧁', '🥧', '🍫', '🍬', '🍭', '🍮', '🍯', '🍼', '🥛', '☕', '🍵', '🍶', '🍾', '🍷', '🍸', '🍹', '🍺', '🍻', '🥂', '🥃', '🥤', '🧋', '🧃', '🧉', '🧊', '🥢', '🍴', '🥄', '🔪', '🏺', '🌍', '🌎', '🌏', '🌐', '🗺️', '🗾', '🧭', '🏔️', '⛰️', '🌋', '🗻', '🏕️', '🏖️', '🏜️', '🏝️', '🏞️', '🏟️', '🏛️', '🏗️', '🧱', '🪨', '🪵', '🛖', '🏘️', '🏚️', '🏠', '🏡', '🏢', '🏣', '🏤', '🏥', '🏦', '🏨', '🏩', '🏪', '🏫', '🏬', '🏭', '🏯', '🏰', '💒', '🗼', '🗽', '⛪', '🕌', '🛕', '🕍', '⛩️', '🕋', '⛲', '⛺', '🌁', '🌃', '🏙️', '🌄', '🌅', '🌆', '🌇', '🌉', '♨️', '🎠', '🎡', '🎢', '💈', '🎪', '🚂', '🚃', '🚄', '🚅', '🚆', '🚇', '🚈', '🚉', '🚊', '🚝', '🚞', '🚋', '🚌', '🚍', '🚎', '🚐', '🚑', '🚒', '🚓', '🚔', '🚕', '🚖', '🚗', '🚙', '🚚', '🚛', '🚜', '🏎️', '🏍️', '🛵', '🛺', '🚲', '🛴', '🛹', '🛼', '🚏', '🛣️', '🛤️', '⛽', '🚨', '🚥', '🚦', '🛑', '🚧', '⚓', '⛵', '🛶', '🚤', '🛳️', '⛴️', '🛥️', '🚢', '✈️', '🛩️', '🛫', '🛬', '🪂', '💺', '🚁', '🚟', '🚠', '🚡', '🛰️', '🚀', '🛸', '🛎️', '🧳', '⌛', '⏳', '⌚', '⏰', '⏱️', '⏲️', '🕰️', '🕛', '🕧', '🕐', '🕜', '🕑', '🕝', '🕒', '🕞', '🕓', '🕟', '🕔', '🕠', '🕕', '🕡', '🕖', '🕢', '🕗', '🕣', '🕘', '🕤', '🕙', '🕥', '🕚', '🕦', '🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗', '🌘', '🌙', '🌚', '🌛', '🌜', '🌡️', '☀️', '🌝', '🌞', '🪐', '⭐', '🌟', '🌠', '🌌', '☁️', '⛅', '⛈️', '🌤️', '🌥️', '🌦️', '🌧️', '🌨️', '🌩️', '🌪️', '🌫️', '🌬️', '🌀', '🌈', '🌂', '☂️', '☔', '🌊', '💧', '🔥', '💥', '⚡', '✨', '💫', '⭐', '🌟', '🌠', '🌌', '☁️', '⛅', '⛈️', '🌤️', '🌥️', '🌦️', '🌧️', '🌨️', '🌩️', '🌪️', '🌫️', '🌬️', '🌀', '🌈', '🌂', '☂️', '☔', '🌊', '💧', '🔥', '💥', '⚡', '✨', '💫', '☄️', '🌃', '🌌', '🌉', '🌁', '🏙️', '🌄', '🌅', '🌆', '🌇', '💡', '🔦', '🏮', '🪔', '🕯️', '🗑️', '🛢️', '🛒', '🛍️', '💰', '🪙', '💴', '💵', '💶', '💷', '💸', '💳', '🧾', '📊', '📈', '📉', '📜', '📄', '📃', '📑', '🏷️', '🔖', '✉️', '📧', '📨', '📩', '📤', '📥', '📦', '📫', '📪', '📬', '📭️', '📮', '🗳️', '✏️', '✒️', '🖋️', '🖊️', '🖌️', '🖍️', '📝', '💼', '📁', '📂', '🗂️', '📅', '📆', '🗓️', '📇', '📈', '📉', '📊', '📋', '📌', '📍', '📎', '🖇️', '📏', '📐', '✂️', '🗃️', '🗄️', '🗑️', '🔒', '🔓', '🔏', '🔐', '🔑', '🗝️', '🔨', '🪓', '⛏️', '⚒️', '🛠️', '🗡️', '⚔️', '🔫', '🏹', '🛡️', '🪚', '🔧', '🪛', '🔩', '⚙️', '🗜️', '⚖️', '🦯', '🔗', '⛓️', '🪝', '🧰', '🧲', '🪜', '⚗️', '🧪', '🧫', '🧬', '🔬', '🔭', '📡', '💉', '🩸', '💊', '🩹', '🩺', '🚪', '🛗', '🪞', '🪟', '🛏️', '🛋️', '🪑', '🚽', '🚿', '🛁', '🪠', '🧼', '🪥', '🧽', '🧯', '🪣', '🧴', '🛎️', '🔑', '🗝️', '🚪', '🛗', '🪞', '🪟', '🛏️', '🛋️', '🪑', '🚽', '🚿', '🛁', '🪠', '🧼', '🪥', '🧽', '🧯', '🪣', '🧴', '🧷', '🧵', '🧶', '🪢', '🪡', '🧥', '🥼', '🦺', '👚', '👕', '👖', ' shorts', '👔', '👗', '👙', '👘', '🥻', '🩱', '🩲', '🩳', '🩰', '👠', '👡', '👢', '🥾', '👟', '🥿', '🧦', '🧤', '🧣', '🎩', '🧢', '👒', '🎓', '⛑️', '👑', '💍', '👝', '👛', '👜', '💼', '🎒', '🧳', '👓', '🕶️', '🥽', '🥼', '🦺', '🩹', '🩺', '🩻', '🩼', '🩽', '🩾', '🩿', '🪬', '🪷', '🪺', '🪻', '🪼', '🪽', '🪾', '🪿', '🫀', '🫁', '🫃', '🫄', '🫅', '🫆', '🫇', '🫈', '🫉', '🫊', '🫋', '🫌', '🫍', '🫎', '🫏', '🫐', '🫑', '🫒', '🫓', '🫔', '🫕', '🫖', '🫗', '🫘', '🫙', '🫚', '🫛', '🫜', '🫝', '🫞', '🫟', '🫠', '🫡', '🫢', '🫣', '🫤', '🫥', '🫦', '🫧', '🫨', '🫩', '🫪', '🫫', '🫬', '🫭', '🫮', '🫯', '🫰', '🫱', '🫲', '🫳', '🫴', '🫵', '🫶', '🫷', '🫸', '🫹', '🫺', '🫻', '🫼', '🫽', '🫾', '🫿', '🬀', '🬁', '🬂', '🬃', '🬄', '🬅', '🬆', '🬇', '🬈', '🬉', '🬊', '🬋', '🬌', '🬍', '🬎', '🬏', '🬐', '🬑', '🬒', '🬓', '🬔', '🬕', '🬖', '🬗', '🬘', '🬙', '🬚', '🬛', '🬜', '🬝', '🬞', '🬟', '🬠', '🬡', '🬢', '🬣', '🬤', '🬥', '🬦', '🬧', '🬨', '🬩', '🬪', '🬫', '🬬', '🬭', '🬮', '🬯', '🬰', '🬱', '🬲', '🬳', '🬴', '🬵', '🬶', '🬷', '🬸', '🬹', '🬺', '🬻', '🬼', '🬽', '🬾', '🬿', '🭀', '🭁', '🭂', '🭃', '🭄', '🭅', '🭆', '🭇', '🭈', '🭉', '🭊', '🭋', '🭌', '🭍', '🭎', '🭏', '🭐', '🭑', '🭒', '🭓', '🭔', '🭕', '🭖', '🭗', '🭘', '🭙', '🭚', '🭛', '🭜', '🭝', '🭞', '🭟', '🭠', '🭡', '🭢', '🭣', '🭤', '🭥', '🭦', '🭧', '🭨', '🭩', '🭪', '🭫', '🭬', '🭭', '🭮', '🭯', '🭰', '🭱', '🭲', '🭳', '🭴', '🭵', '🭶', '🭷', '🭸', '🭹', '🭺', '🭻', '🭼', '🭽', '🭾', '🭿', '🮀', '🮁', '🮂', '🮃', '🮄', '🮅', '🮆', '🮇', '🮈', '🮉', '🮊', '🮋', '🮌', '🮍', '🮎', '🮏', '🮐', '🮑', '🮒', '🮓', '🮔', '🮕', '🮖', '🮗', '🮘', '🮙', '🮚', '🮛', '🮜', '🮝', '🮞', '🮟', '🮠', '🮡', '🮢', '🮣', '🮤', '🮥', '🮦', '🮧', '🮨', '🮩', '🮪', '🮫', '🮬', '🮭', '🮮', '🮯', '🮰', '🮱', '🮲', '🮳', '🮴', '🮵', '🮶', '🮷', '🮸', '🮹', '🮺', '🮻', '🮼', '🮽', '🮾', '🮿', '🯀', '🯁', '🯂', '🯃', '🯄', '🯅', '🯆', '🯇', '🯈', '🯉', '🯊', '🯋', '🯌', '🯍', '🯎', '🯏', '🯐', '🯑', '🯒', '🯓', '🯔', '🯕', '🯖', '🯗', '🯘', '🯙', '🯚', '🯛', '🯜', '🯝', '🯞', '🯟', '🯠', '🯡', '🯢', '🯣', '🯤', '🯥', '🯦', '🯧', '🯨', '🯩', '🯪', '🯫', '🯬', '🯭', '🯮', '🯯', '🯰', '🯱', '🯲', '🯳', '🯴', '🯵', '🯶', '🯷', '🯸', '🯹', '🯺', '🯻', '🯼', '🯽', '🯾', '🯿'];

            function populateEmojiPicker() {
                emojiGrid.innerHTML = '';
                emojis.forEach(emoji => {
                    const span = document.createElement('span');
                    span.textContent = emoji;
                    span.style.cursor = 'pointer';
                    span.style.padding = '5px';
                    span.style.fontSize = '1.5em';
                    span.classList.add('emoji-item');
                    emojiGrid.appendChild(span);
                });
            }

            openEmojiPickerBtn.addEventListener('click', () => {
                emojiPicker.style.display = 'block';
                // Position the emoji picker next to the input field
                const rect = newHabitEmojiInput.getBoundingClientRect();
                emojiPicker.style.top = `${rect.bottom + window.scrollY}px`;
                emojiPicker.style.left = `${rect.left + window.scrollX}px`;
            });

            closeEmojiPickerBtn.addEventListener('click', () => {
                emojiPicker.style.display = 'none';
            });

            emojiGrid.addEventListener('click', (event) => {
                if (event.target.classList.contains('emoji-item')) {
                    newHabitEmojiInput.value = event.target.textContent;
                    emojiPicker.style.display = 'none';
                }
            });

            populateEmojiPicker();

            let habits = JSON.parse(localStorage.getItem('habits')) || [
                { name: 'Read', emoji: '📚', completed: true },
                { name: 'Meditate', emoji: '🧘', completed: true },
                { name: 'Study', emoji: '📖', completed: false },
                { name: 'Clean', emoji: '🧹', completed: true },
                { name: 'Stretch', emoji: '🤸', completed: false },
                { name: 'Hydrate', emoji: '💧', completed: true },
                { name: 'Journal', emoji: '🌱', completed: false },
                { name: 'Walk', emoji: '🚶', completed: true }
            ];

            function saveHabits() {
                localStorage.setItem('habits', JSON.stringify(habits));
            }

            function renderHabits() {
                habitGrid.innerHTML = ''; // Clear existing habits
                habits.forEach((habit, index) => {
                    const habitItem = document.createElement('div');
                    habitItem.classList.add('habit-item');
                    if (habit.completed) {
                        habitItem.classList.add('completed');
                    }
                    habitItem.innerHTML = `
                        <div class="habit-icon">${habit.emoji}</div>
                        <div>${habit.name}</div>
                        <button class="remove-habit-btn" data-index="${index}" style="background: none; border: none; color: #ff4d4d; font-size: 1.2em; cursor: pointer; margin-top: 5px;">✖</button>
                    `;
                    habitGrid.appendChild(habitItem);
                });
                updateProgress();
            }

            function updateProgress() {
                const completedHabits = habits.filter(habit => habit.completed).length;
                const totalHabits = habits.length;
                const progressPercentage = totalHabits > 0 ? (completedHabits / totalHabits) * 100 : 0;
                document.querySelector('.progress-fill').style.width = `${progressPercentage}%`;
                document.querySelector('.planner-section .content > div:nth-child(2)').innerHTML = `${completedHabits}/${totalHabits} habits completed`;
            }

            addHabitBtn.addEventListener('click', () => {
                const name = newHabitNameInput.value.trim();
                const emoji = newHabitEmojiInput.value.trim();

                if (name && emoji) {
                    habits.push({ name, emoji, completed: false });
                    saveHabits();
                    renderHabits();
                    newHabitNameInput.value = '';
                    newHabitEmojiInput.value = '';
                } else {
                    alert('Please enter both habit name and emoji.');
                }
            });

            habitGrid.addEventListener('click', (event) => {
                if (event.target.classList.contains('remove-habit-btn')) {
                    const index = event.target.dataset.index;
                    habits.splice(index, 1);
                    saveHabits();
                    renderHabits();
                } else if (event.target.closest('.habit-item')) {
                    const habitItem = event.target.closest('.habit-item');
                    const index = Array.from(habitGrid.children).indexOf(habitItem);
                    habits[index].completed = !habits[index].completed;
                    saveHabits();
                    renderHabits();
                }
            });

            renderHabits();
        });
    </script>
</body>
</html>