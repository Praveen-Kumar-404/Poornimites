<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code Formatters - Poornimites Toolkit</title>
    <link rel="stylesheet" href="../../chat/style.css">
    <link rel="stylesheet" href="../../assets/css/header.css">
    <link rel="stylesheet" href="../../assets/css/footer.css">
    <link rel="stylesheet" href="../../assets/css/modules/tools/toolkit.css">
    <style>
        .code-area {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            min-height: 300px;
            background: #f8f9fa;
        }
    </style>
</head>

<body>
    <header class="navbar">
        <div class="logo">üéì <a href="../../index.html">Poornimites</a></div>
        <nav class="nav-links">
            <a href="../../tools.html">‚Üê Back to Toolkit</a>
        </nav>
        <div class="nav-icons">
            <a href="../../index.html">üè†</a>
        </div>
    </header>

    <main class="toolkit-container">
        <div class="toolkit-header">
            <h1>üé® Code Formatters</h1>
            <p>Format and beautify SQL, JSON, XML, HTML, and CSS</p>
        </div>

        <div class="tool-content">
            <div class="tabs">
                <button class="tab active" data-tab="json">JSON</button>
                <button class="tab" data-tab="sql">SQL</button>
                <button class="tab" data-tab="xml">XML</button>
                <button class="tab" data-tab="html">HTML</button>
                <button class="tab" data-tab="css">CSS</button>
            </div>

            <!-- JSON Tab -->
            <div class="tab-content active" id="json">
                <div class="tool-grid">
                    <div class="form-group">
                        <label class="form-label">Input JSON</label>
                        <textarea id="jsonInput" class="form-control code-area"
                            placeholder='{"name":"John","age":30}'></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Formatted JSON</label>
                        <textarea id="jsonOutput" class="form-control code-area" readonly></textarea>
                    </div>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-primary" onclick="formatter.formatJSON()">‚ú® Format</button>
                    <button class="btn btn-secondary" onclick="formatter.minifyJSON()">üì¶ Minify</button>
                    <button class="btn btn-secondary" onclick="formatter.copyOutput('jsonOutput')">üìã Copy</button>
                </div>
            </div>

            <!-- SQL Tab -->
            <div class="tab-content" id="sql">
                <div class="tool-grid">
                    <div class="form-group">
                        <label class="form-label">Input SQL</label>
                        <textarea id="sqlInput" class="form-control code-area"
                            placeholder="SELECT * FROM users WHERE id=1"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Formatted SQL</label>
                        <textarea id="sqlOutput" class="form-control code-area" readonly></textarea>
                    </div>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-primary" onclick="formatter.formatSQL()">‚ú® Format</button>
                    <button class="btn btn-secondary" onclick="formatter.copyOutput('sqlOutput')">üìã Copy</button>
                </div>
            </div>

            <!-- XML Tab -->
            <div class="tab-content" id="xml">
                <div class="tool-grid">
                    <div class="form-group">
                        <label class="form-label">Input XML</label>
                        <textarea id="xmlInput" class="form-control code-area"
                            placeholder="<root><item>value</item></root>"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Formatted XML</label>
                        <textarea id="xmlOutput" class="form-control code-area" readonly></textarea>
                    </div>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-primary" onclick="formatter.formatXML()">‚ú® Format</button>
                    <button class="btn btn-secondary" onclick="formatter.copyOutput('xmlOutput')">üìã Copy</button>
                </div>
            </div>

            <!-- HTML Tab -->
            <div class="tab-content" id="html">
                <div class="tool-grid">
                    <div class="form-group">
                        <label class="form-label">Input HTML</label>
                        <textarea id="htmlInput" class="form-control code-area"
                            placeholder="<div><p>Hello</p></div>"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Formatted HTML</label>
                        <textarea id="htmlOutput" class="form-control code-area" readonly></textarea>
                    </div>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-primary" onclick="formatter.formatHTML()">‚ú® Format</button>
                    <button class="btn btn-secondary" onclick="formatter.copyOutput('htmlOutput')">üìã Copy</button>
                </div>
            </div>

            <!-- CSS Tab -->
            <div class="tab-content" id="css">
                <div class="tool-grid">
                    <div class="form-group">
                        <label class="form-label">Input CSS</label>
                        <textarea id="cssInput" class="form-control code-area"
                            placeholder="body{margin:0;padding:0;}"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Formatted CSS</label>
                        <textarea id="cssOutput" class="form-control code-area" readonly></textarea>
                    </div>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-primary" onclick="formatter.formatCSS()">‚ú® Format</button>
                    <button class="btn btn-secondary" onclick="formatter.copyOutput('cssOutput')">üìã Copy</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-links">
            <a href="../site/about.html">About</a>
            <a href="../site/faq.html">FAQ</a>
            <a href="../site/privacy.html">Privacy</a>
        </div>
        <div class="footer-text">
            Made with üíô by Students for Students. ¬© 2025 Poornimites
        </div>
    </footer>

    <script src="../../assets/js/modules/tools/toolkit-common.js"></script>
    <script>
        const formatter = {
            init() {
                ToolkitUtils.initTabs();
            },

            formatJSON() {
                try {
                    const input = document.getElementById('jsonInput').value;
                    const parsed = JSON.parse(input);
                    const formatted = JSON.stringify(parsed, null, 2);
                    document.getElementById('jsonOutput').value = formatted;
                    ToolkitUtils.showToast('JSON formatted!', 'success');
                } catch (error) {
                    ToolkitUtils.showToast('Invalid JSON: ' + error.message, 'error');
                }
            },

            minifyJSON() {
                try {
                    const input = document.getElementById('jsonInput').value;
                    const parsed = JSON.parse(input);
                    const minified = JSON.stringify(parsed);
                    document.getElementById('jsonOutput').value = minified;
                    ToolkitUtils.showToast('JSON minified!', 'success');
                } catch (error) {
                    ToolkitUtils.showToast('Invalid JSON: ' + error.message, 'error');
                }
            },

            formatSQL() {
                try {
                    const input = document.getElementById('sqlInput').value;
                    let formatted = input
                        .replace(/\bSELECT\b/gi, '\nSELECT\n  ')
                        .replace(/\bFROM\b/gi, '\nFROM\n  ')
                        .replace(/\bWHERE\b/gi, '\nWHERE\n  ')
                        .replace(/\bAND\b/gi, '\n  AND ')
                        .replace(/\bOR\b/gi, '\n  OR ')
                        .replace(/\bORDER BY\b/gi, '\nORDER BY\n  ')
                        .replace(/\bGROUP BY\b/gi, '\nGROUP BY\n  ')
                        .replace(/\bJOIN\b/gi, '\nJOIN\n  ')
                        .replace(/\bLEFT JOIN\b/gi, '\nLEFT JOIN\n  ')
                        .replace(/\bRIGHT JOIN\b/gi, '\nRIGHT JOIN\n  ')
                        .replace(/\bINNER JOIN\b/gi, '\nINNER JOIN\n  ')
                        .replace(/\bON\b/gi, '\n  ON ')
                        .replace(/,/g, ',\n  ')
                        .trim();

                    document.getElementById('sqlOutput').value = formatted;
                    ToolkitUtils.showToast('SQL formatted!', 'success');
                } catch (error) {
                    ToolkitUtils.showToast('Error formatting SQL', 'error');
                }
            },

            formatXML() {
                try {
                    const input = document.getElementById('xmlInput').value;
                    const formatted = this.formatXMLString(input);
                    document.getElementById('xmlOutput').value = formatted;
                    ToolkitUtils.showToast('XML formatted!', 'success');
                } catch (error) {
                    ToolkitUtils.showToast('Invalid XML: ' + error.message, 'error');
                }
            },

            formatXMLString(xml) {
                let formatted = '';
                let indent = '';
                const tab = '  ';

                xml.split(/>\s*</).forEach(node => {
                    if (node.match(/^\/\w/)) indent = indent.substring(tab.length);
                    formatted += indent + '<' + node + '>\r\n';
                    if (node.match(/^<?\w[^>]*[^\/]$/)) indent += tab;
                });

                return formatted.substring(1, formatted.length - 3);
            },

            formatHTML() {
                try {
                    const input = document.getElementById('htmlInput').value;
                    const formatted = this.formatXMLString(input);
                    document.getElementById('htmlOutput').value = formatted;
                    ToolkitUtils.showToast('HTML formatted!', 'success');
                } catch (error) {
                    ToolkitUtils.showToast('Error formatting HTML', 'error');
                }
            },

            formatCSS() {
                try {
                    const input = document.getElementById('cssInput').value;
                    let formatted = input
                        .replace(/\{/g, ' {\n  ')
                        .replace(/\}/g, '\n}\n')
                        .replace(/;/g, ';\n  ')
                        .replace(/,/g, ',\n')
                        .replace(/\n\s*\n/g, '\n')
                        .trim();

                    document.getElementById('cssOutput').value = formatted;
                    ToolkitUtils.showToast('CSS formatted!', 'success');
                } catch (error) {
                    ToolkitUtils.showToast('Error formatting CSS', 'error');
                }
            },

            copyOutput(outputId) {
                const output = document.getElementById(outputId).value;
                if (output) {
                    ToolkitUtils.copyToClipboard(output);
                } else {
                    ToolkitUtils.showToast('Nothing to copy', 'warning');
                }
            }
        };

        formatter.init();
    </script>
</body>

</html>