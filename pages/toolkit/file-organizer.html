<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Organizer - Poornimites Toolkit</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/header.css">
    <link rel="stylesheet" href="../../assets/css/footer.css">
    <link rel="stylesheet" href="../../assets/css/toolkit.css">
</head>

<body>
    <header class="navbar">
        <div class="logo">üéì <a href="../../index.html">Poornimites</a></div>
        <nav class="nav-links">
            <a href="../../tools.html">‚Üê Back to Toolkit</a>
        </nav>
        <div class="nav-icons">
            <a href="../../index.html">üè†</a>
        </div>
    </header>

    <main class="toolkit-container">
        <div class="toolkit-header">
            <h1>üìÅ File Organizer</h1>
            <p>Organize and categorize your study files</p>
        </div>

        <div class="tool-grid">
            <div>
                <div class="tool-section">
                    <h2>Add File</h2>
                    <div class="form-group">
                        <label class="form-label">File Name</label>
                        <input type="text" id="fileName" class="form-control" placeholder="Assignment1.pdf">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select id="fileCategory" class="form-control">
                            <option value="Assignments">Assignments</option>
                            <option value="Notes">Notes</option>
                            <option value="Projects">Projects</option>
                            <option value="Exams">Exams</option>
                            <option value="Resources">Resources</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Subject</label>
                        <input type="text" id="fileSubject" class="form-control" placeholder="Mathematics">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Tags (comma-separated)</label>
                        <input type="text" id="fileTags" class="form-control" placeholder="calculus, homework">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Notes</label>
                        <textarea id="fileNotes" class="form-control" rows="3"
                            placeholder="Additional notes..."></textarea>
                    </div>

                    <button class="btn btn-primary btn-block" onclick="organizer.addFile()">+ Add File</button>
                </div>
            </div>

            <div>
                <div class="tool-section">
                    <div class="d-flex justify-between align-center mb-3">
                        <h2>My Files</h2>
                        <select id="filterCategory" class="form-control" style="width: 150px;"
                            onchange="organizer.render()">
                            <option value="all">All Categories</option>
                            <option value="Assignments">Assignments</option>
                            <option value="Notes">Notes</option>
                            <option value="Projects">Projects</option>
                            <option value="Exams">Exams</option>
                            <option value="Resources">Resources</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <input type="text" id="searchFiles" class="form-control" placeholder="Search files..."
                            oninput="organizer.search()">
                    </div>

                    <div id="filesList"></div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-links">
            <a href="../../about.html">About</a>
            <a href="../../faq.html">FAQ</a>
            <a href="../../privacy.html">Privacy</a>
        </div>
        <div class="footer-text">
            Made with üíô by Students for Students. ¬© 2025 Poornimites
        </div>
    </footer>

    <script src="../../assets/js/toolkit-common.js"></script>
    <script>
        const organizer = {
            files: [],

            init() {
                this.load();
                this.render();
            },

            addFile() {
                const name = document.getElementById('fileName').value.trim();
                const category = document.getElementById('fileCategory').value;
                const subject = document.getElementById('fileSubject').value.trim();

                if (!name) {
                    ToolkitUtils.showToast('Please enter a file name', 'warning');
                    return;
                }

                const file = {
                    id: ToolkitUtils.generateId('file'),
                    name,
                    category,
                    subject,
                    tags: document.getElementById('fileTags').value.split(',').map(t => t.trim()).filter(t => t),
                    notes: document.getElementById('fileNotes').value.trim(),
                    createdAt: new Date()
                };

                this.files.unshift(file);
                this.save();
                this.render();

                // Clear form
                document.getElementById('fileName').value = '';
                document.getElementById('fileSubject').value = '';
                document.getElementById('fileTags').value = '';
                document.getElementById('fileNotes').value = '';

                ToolkitUtils.showToast('File added!', 'success');
            },

            delete(id) {
                if (confirm('Delete this file entry?')) {
                    this.files = this.files.filter(f => f.id !== id);
                    this.save();
                    this.render();
                    ToolkitUtils.showToast('File deleted', 'info');
                }
            },

            search() {
                const query = document.getElementById('searchFiles').value.toLowerCase();
                const filtered = this.files.filter(f =>
                    f.name.toLowerCase().includes(query) ||
                    f.subject.toLowerCase().includes(query) ||
                    f.tags.some(t => t.toLowerCase().includes(query))
                );
                this.render(filtered);
            },

            render(filesToRender = null) {
                const container = document.getElementById('filesList');
                let files = filesToRender || this.files;

                // Apply category filter
                const categoryFilter = document.getElementById('filterCategory').value;
                if (categoryFilter !== 'all') {
                    files = files.filter(f => f.category === categoryFilter);
                }

                if (files.length === 0) {
                    container.innerHTML = '<p class="text-muted text-center">No files found</p>';
                    return;
                }

                container.innerHTML = files.map(file => `
                <div class="card mb-2 p-3">
                    <div class="d-flex justify-between align-center">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; font-size: 1.1rem;">üìÑ ${file.name}</div>
                            <div class="mt-1">
                                <span class="badge badge-primary">${file.category}</span>
                                ${file.subject ? `<span class="badge badge-secondary">${file.subject}</span>` : ''}
                                ${file.tags.map(tag => `<span class="badge badge-secondary">${tag}</span>`).join(' ')}
                            </div>
                            ${file.notes ? `<div class="mt-2" style="color: #666; font-size: 0.9rem;">${file.notes}</div>` : ''}
                            <div class="text-muted mt-1" style="font-size: 0.85rem;">
                                Added: ${new Date(file.createdAt).toLocaleDateString()}
                            </div>
                        </div>
                        <button class="btn btn-danger btn-sm" onclick="organizer.delete('${file.id}')">√ó</button>
                    </div>
                </div>
            `).join('');
            },

            save() {
                ToolkitUtils.storage.save('file_organizer', this.files);
            },

            load() {
                this.files = ToolkitUtils.storage.load('file_organizer', []);
            }
        };

        organizer.init();
    </script>
</body>

</html>